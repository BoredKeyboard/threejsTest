<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="favicon.ico" href="">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Game</title>
  <link rel="stylesheet" href="css/main.css">
</head>

<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/102/three.js"></script>
  <script scr="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>
  <script>
    var scene = new THREE.Scene();
    
    var camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000)
    camera.position.set(0,1,4);  
    
    var renderer = new THREE.WebGLRenderer({antialias: true});
    renderer.setClearColor("#e5e5e5");
    renderer.setSize(window.innerWidth,window.innerHeight);
    
    document.body.appendChild(renderer.domElement);

    window.addEventListener('resize', () => {
      renderer.setSize(window.innerWidth,window.innerHeight);
      camera.aspect = window.innerWidth / window.innerHeight;

      camera.updateProjectionMatrix();
    })




    var geometry = new THREE.BoxGeometry(1, 1, 1);
    var material = new THREE.MeshLambertMaterial({color: 0xFFCC00});
    var mesh = new THREE.Mesh(geometry, material);

    mesh.position.set(0,0,0);
    mesh.rotation.set(45,45,0);
    mesh.scale.set(1,1,1);

    scene.add(mesh);

    var ambLight = new THREE.AmbientLight(0x404040);
    scene.add(ambLight);

    var light = new THREE.PointLight(0xFFFFFF, 1, 500)
    light.position.set(10,0,25);
    scene.add(light);

    var xSpeed = 0.1;
    var ySpeed = 0.1;
    var zSpeed = 0.1;
    
    document.addEventListener("keydown", onDocumentKeyDown, false);
    function onDocumentKeyDown(event) {
      var keyCode = event.which;
      //up, SPACE
      if (keyCode == 32) {
        mesh.position.y += ySpeed;
      }
      //down, C
      else if (keyCode == 67) {
        mesh.position.y -= ySpeed;
      }
      //left, A
      else if (keyCode == 65) {
        mesh.position.x -= xSpeed;
      }
      //right, D
      else if (keyCode == 68) {
        mesh.position.x += xSpeed;
      }
      //forward, W
      else if (keyCode == 87) {
        mesh.position.z -= zSpeed;
      }
      //backward, S
      else if (keyCode == 83) {
        mesh.position.z += zSpeed;
      }
      //enter, reset position
      else if (keyCode == 13) {
        mesh.position.x = 0.0;
        mesh.position.y = 0.0;
        mesh.position.z = 0.0;
      }
      

    };

    var scale = 1;
    var mouseX = 0;
    var mouseY = 0;

    camera.rotation.order = "YXZ"; // this is not the default

    document.addEventListener( "mousemove", mouseMove, false );

    function mouseMove( event ) {

        mouseX = - ( event.clientX / renderer.domElement.clientWidth ) * 2 + 1;
        mouseY = - ( event.clientY / renderer.domElement.clientHeight ) * 2 + 1;

        camera.rotation.x = mouseY / scale;
        camera.rotation.y = mouseX / scale;

    }

    var render = function() {
      requestAnimationFrame(render);
      mesh.rotation.set(0,0,0);
      renderer.render(scene, camera);
    }

    render();

  </script>
</body>
</html>
